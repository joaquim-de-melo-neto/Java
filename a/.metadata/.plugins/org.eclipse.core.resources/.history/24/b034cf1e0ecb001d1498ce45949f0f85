package books;

import java.sql.*;

import javax.swing.JOptionPane;

public class BookDatabase {
    private Connection conn;

    public BookDatabase() throws SQLException {
        String url = "jdbc:mysql://localhost:3306/books";
        String user = "username";
        String password = "password";
        conn = DriverManager.getConnection(url, user, password);
    }

    public void addAuthor(String firstName, String lastName) throws SQLException {
        String sql = "INSERT INTO author (firstName, lastName) VALUES (?, ?)";
        PreparedStatement statement = conn.prepareStatement(sql);
        statement.setString(1, firstName);
        statement.setString(2, lastName);
        statement.executeUpdate();
    }
    
    public void queryAuthor() throws SQLException {
    Statement stmt = conn.createStatement();
    ResultSet rs = stmt.executeQuery("SELECT * FROM Author");
    while (rs.next()) {
        int id = rs.getInt("id");
        String nome = rs.getString("firstName");
        // Fazer algo com os valores do resultado
        String message = String.format("%3d - %s",id,nome);
        JOptionPane.showMessageDialog(null,message);
    }
    rs.close();
    stmt.close();
    conn.close();
    }
}